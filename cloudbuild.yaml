logsBucket: "gs://spotify-project-logs-bucket"
# steps:
# - name: "gcr.io/cloud-builders/gcloud"
#   args: ["app", "deploy"]
# timeout: "1600s"
steps:
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  entrypoint: 'bash'
  args: 
   - '-c'
   - |
      sed -i "s|##_CLIENT_ID##|${_CLIENT_ID}|g ; s|##_CLIENT_SECRET##|${_CLIENT_SECRET}|g ; s|##_REDIRECT_URI##|${_REDIRECT_URI}|g ; s|##_SCOPE##|${_SCOPE}|g" app.yaml
      gcloud config set app/cloud_build_timeout 1600
      gcloud app deploy

timeout: '1600s'
substitutions:
  _CLIENT_ID: ${_CLIENT_ID}
  _CLIENT_SECRET: ${_CLIENT_SECRET}
  #REDIRECT_URI: 'http://localhost:8080/callback'
  _REDIRECT_URI: ${_REDIRECT_URI}
  _SCOPE: ${_SCOPE}

